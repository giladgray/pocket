(function() {
  var BARRIER_DISTANCE, BARRIER_WIDTH, GRAVITY, MOVE, addLevel, bestScore, ctx, highscoreEl, i, lastBarrierX, level, pocket, random, rectangle, score, scoreEl, scoreOne, scoreZero, start, _i,
    __slice = [].slice;

  random = function(min, max) {
    if (max == null) {
      max = min;
      min = 0;
    }
    return Math.floor(Math.random() * (max - min)) + min;
  };

  rectangle = function() {
    var rect1;
    rect1 = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return {
      overlaps: function() {
        var rect2, xOverlap, yOverlap;
        rect2 = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
        xOverlap = yOverlap = true;
        if (rect1[0] > rect2[0] + rect2[2] || rect1[0] + rect1[2] < rect2[0]) {
          xOverlap = false;
        }
        if (rect1[1] > rect2[1] + rect2[3] || rect1[1] + rect1[3] < rect2[1]) {
          yOverlap = false;
        }
        return xOverlap && yOverlap;
      }
    };
  };

  pocket = new Pocket;

  pocket.component('context-2d', function(cmp, _arg) {
    var canvas, resize;
    canvas = _arg.canvas;
    cmp.canvas = document.querySelector(canvas || '#canvas');
    cmp.g2d = cmp.canvas.getContext('2d');
    cmp.center = {
      x: 0,
      y: 0
    };
    window.addEventListener('resize', resize = function() {
      cmp.canvas.width = document.body.clientWidth;
      cmp.canvas.height = document.body.clientHeight;
      cmp.width = cmp.canvas.width;
      return cmp.height = cmp.canvas.height;
    });
    return resize();
  });

  pocket.key({
    'context-2d': null
  });

  pocket.component('keyboard-state', function(cmp, _arg) {
    var keymap, target;
    target = _arg.target, keymap = _arg.keymap;
    cmp.target = target || document;
    cmp.down = {};
    cmp.isNewPress = function(keyName, recency) {
      var delta, downTime;
      if (recency == null) {
        recency = 10;
      }
      downTime = cmp.down[keyName];
      delta = Date.now() - downTime;
      if (downTime > 0 && delta > recency) {
        cmp.down[keyName] = -1;
        return true;
      }
      return false;
    };
    cmp.target.addEventListener('keydown', function(e) {
      var keyName;
      keyName = keymap[e.which];
      cmp.down[e.which] = true;
      if (keyName && cmp.down[keyName] === 0) {
        return cmp.down[keyName] = Date.now();
      }
    });
    return cmp.target.addEventListener('keyup', function(e) {
      var keyName;
      keyName = keymap[e.which];
      cmp.down[e.which] = false;
      if (keyName) {
        return cmp.down[keyName] = 0;
      }
    });
  });

  pocket.key({
    'input': null,
    'keyboard-state': {
      keymap: {
        37: 'LEFT',
        39: 'RIGHT'
      }
    }
  });

  ctx = pocket.getData('context-2d');

  ctx.center = {
    x: ctx.width / 2,
    y: ctx.height / 2
  };

  GRAVITY = 0.4;

  BARRIER_DISTANCE = ctx.height * 3 / 4;

  BARRIER_WIDTH = 200;

  pocket.component('position', {
    x: 0,
    y: 0
  });

  pocket.component('velocity', {
    x: 0,
    y: 0
  });

  pocket.component('square', {
    size: 30,
    color: 'cornflowerblue',
    angle: 0
  });

  pocket.component('barrier', {
    height: 50,
    gapWidth: BARRIER_WIDTH,
    x: 0,
    y: 0,
    color: 'cornflowerblue'
  });

  pocket.player = pocket.key({
    amazing: true,
    square: {
      color: 'black',
      angle: Math.PI / 4,
      size: 20
    },
    position: {
      x: ctx.center.x,
      y: ctx.center.y + ctx.height / 4
    },
    velocity: null
  });

  level = -1;

  lastBarrierX = ctx.center.x;

  addLevel = function() {
    var barrier, squareX;
    barrier = {
      x: ctx.center.x + random(-150, 150),
      y: 100 - BARRIER_DISTANCE * level++
    };
    squareX = (barrier.x + lastBarrierX) / 2 + BARRIER_WIDTH / 2;
    pocket.key({
      evil: true,
      barrier: barrier
    });
    pocket.key({
      evil: true,
      square: null,
      position: {
        x: squareX + random(-BARRIER_WIDTH / 2, BARRIER_WIDTH / 2),
        y: barrier.y - BARRIER_DISTANCE * 2 / 3
      }
    });
    pocket.key({
      evil: true,
      square: null,
      position: {
        x: squareX + random(-BARRIER_WIDTH / 2, BARRIER_WIDTH / 2),
        y: barrier.y - BARRIER_DISTANCE / 3
      }
    });
    return lastBarrierX = barrier.x;
  };

  for (i = _i = 1; _i <= 3; i = ++_i) {
    addLevel();
  }

  score = 0;

  bestScore = 0;

  scoreEl = document.querySelector('.scores .current');

  highscoreEl = document.querySelector('.scores .best');

  scoreOne = function() {
    return scoreEl.textContent = ++score;
  };

  scoreZero = function() {
    if (score > bestScore) {
      highscoreEl.textContent = bestScore = score;
    }
    return scoreEl.textContent = score = 0;
  };

  pocket.system('level-barrier', ['barrier', 'evil'], function(pocket, keys, barriers) {
    var barrier, key, pPos, pSq, playerRect, _j, _len, _results;
    pPos = pocket.dataFor(pocket.player, 'position');
    pSq = pocket.dataFor(pocket.player, 'square');
    playerRect = rectangle(pPos.x, pPos.y + ctx.width / 3, pSq.size, pSq.size);
    _results = [];
    for (_j = 0, _len = keys.length; _j < _len; _j++) {
      key = keys[_j];
      barrier = barriers[key];
      if (barrier.marked != null) {
        continue;
      }
      if (playerRect.overlaps(0, barrier.y, ctx.width, barrier.height)) {
        barrier.color = 'red';
        barrier.marked = false;
      }
      if (playerRect.overlaps(barrier.x, barrier.y, barrier.gapWidth, barrier.height)) {
        barrier.color = 'green';
        barrier.marked = true;
        scoreOne();
      }
      if (barrier.marked === false) {
        _results.push(scoreZero());
      } else {
        _results.push(void 0);
      }
    }
    return _results;
  });

  pocket.system('square-smash', ['position', 'square', 'evil'], function(pocket, keys, positions, squares) {
    var key, pPos, pSq, playerRect, position, square, _j, _len, _results;
    pPos = pocket.dataFor(pocket.player, 'position');
    pSq = pocket.dataFor(pocket.player, 'square');
    playerRect = rectangle(pPos.x, pPos.y + ctx.width / 3, pSq.size, pSq.size);
    _results = [];
    for (_j = 0, _len = keys.length; _j < _len; _j++) {
      key = keys[_j];
      position = positions[key];
      square = squares[key];
      if (square.marked) {
        continue;
      }
      if (playerRect.overlaps(position.x, position.y, square.size, square.size)) {
        square.color = 'red';
        square.marked = true;
        _results.push(scoreZero());
      } else {
        _results.push(void 0);
      }
    }
    return _results;
  });

  MOVE = {
    x: 2,
    y: 12
  };

  pocket.systemForEach('input-brick', ['velocity', 'amazing'], function(pocket, key, velocity) {
    var jump, keyboard;
    keyboard = pocket.getData('keyboard-state');
    jump = 0;
    if (keyboard.isNewPress('LEFT')) {
      jump = -MOVE.x;
    }
    if (keyboard.isNewPress('RIGHT')) {
      jump = MOVE.x;
    }
    if (jump) {
      velocity.x = jump;
      return velocity.y = MOVE.y;
    }
  });

  pocket.systemForEach('gravity', ['velocity'], function(pocket, key, vel) {
    return vel.y -= GRAVITY;
  });

  pocket.systemForEach('move', ['position', 'velocity'], function(pocket, key, pos, vel) {
    pos.x += vel.x;
    pos.y -= vel.y;
    return ctx.center.y = Math.min(ctx.center.y, pos.y);
  });

  pocket.systemForEach('destroy-barrier', ['barrier', 'evil'], function(pocket, key, barrier) {
    if (barrier.y - BARRIER_DISTANCE * 2 > ctx.center.y) {
      pocket.destroyKey(key);
      return addLevel();
    }
  });

  pocket.systemForEach('destroy-square', ['position', 'evil'], function(pocket, key, pos) {
    if (pos.y - BARRIER_DISTANCE * 2 > ctx.center.y) {
      return pocket.destroyKey(key);
    }
  });

  pocket.system('clear-canvas', [], function(pocket) {
    return ctx.g2d.clearRect(0, 0, ctx.width, ctx.height);
  });

  pocket.systemForEach('draw-square', ['position', 'square'], function(pocket, key, pos, square) {
    var center, g2d, isAmazing, width;
    isAmazing = pocket.dataFor(key, 'amazing');
    g2d = ctx.g2d, center = ctx.center, width = ctx.width;
    g2d.save();
    g2d.beginPath();
    g2d.translate(pos.x, pos.y - center.y + (isAmazing ? width / 3 : 0));
    g2d.rotate(square.angle);
    g2d.fillStyle = square.color;
    g2d.rect(0, 0, square.size, square.size);
    g2d.closePath();
    g2d.fill();
    return g2d.restore();
  });

  pocket.systemForEach('draw-barrier', ['barrier'], function(pocket, key, barrier) {
    var center, g2d, width;
    g2d = ctx.g2d, width = ctx.width, center = ctx.center;
    g2d.save();
    g2d.beginPath();
    g2d.translate(0, barrier.y - center.y);
    g2d.fillStyle = barrier.color;
    g2d.rect(0, 0, barrier.x, barrier.height);
    g2d.rect(barrier.x + barrier.gapWidth, 0, width - barrier.gapWidth, barrier.height);
    g2d.fill();
    g2d.closePath();
    return g2d.restore();
  });

  start = function(time) {
    pocket.tick(time);
    return window.requestAnimationFrame(start);
  };

  document.addEventListener('DOMContentLoaded', function() {
    return start();
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImp1bXBlci9qdW1wZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQSx3TEFBQTtJQUFBLGtCQUFBOztBQUFBLEVBQUEsTUFBQSxHQUFTLFNBQUMsR0FBRCxFQUFNLEdBQU4sR0FBQTtBQUNQLElBQUEsSUFBTyxXQUFQO0FBQ0UsTUFBQSxHQUFBLEdBQU0sR0FBTixDQUFBO0FBQUEsTUFDQSxHQUFBLEdBQU0sQ0FETixDQURGO0tBQUE7QUFHQSxXQUFPLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFBLEdBQWdCLENBQUMsR0FBQSxHQUFNLEdBQVAsQ0FBM0IsQ0FBQSxHQUEwQyxHQUFqRCxDQUpPO0VBQUEsQ0FBVCxDQUFBOztBQUFBLEVBTUEsU0FBQSxHQUFZLFNBQUEsR0FBQTtBQUNWLFFBQUEsS0FBQTtBQUFBLElBRFcsK0RBQ1gsQ0FBQTtXQUFBO0FBQUEsTUFBQSxRQUFBLEVBQVUsU0FBQSxHQUFBO0FBQ1IsWUFBQSx5QkFBQTtBQUFBLFFBRFMsK0RBQ1QsQ0FBQTtBQUFBLFFBQUEsUUFBQSxHQUFXLFFBQUEsR0FBVyxJQUF0QixDQUFBO0FBQ0EsUUFBQSxJQUFHLEtBQU0sQ0FBQSxDQUFBLENBQU4sR0FBVyxLQUFNLENBQUEsQ0FBQSxDQUFOLEdBQVcsS0FBTSxDQUFBLENBQUEsQ0FBNUIsSUFBa0MsS0FBTSxDQUFBLENBQUEsQ0FBTixHQUFXLEtBQU0sQ0FBQSxDQUFBLENBQWpCLEdBQXNCLEtBQU0sQ0FBQSxDQUFBLENBQWpFO0FBQ0UsVUFBQSxRQUFBLEdBQVcsS0FBWCxDQURGO1NBREE7QUFHQSxRQUFBLElBQUcsS0FBTSxDQUFBLENBQUEsQ0FBTixHQUFXLEtBQU0sQ0FBQSxDQUFBLENBQU4sR0FBVyxLQUFNLENBQUEsQ0FBQSxDQUE1QixJQUFrQyxLQUFNLENBQUEsQ0FBQSxDQUFOLEdBQVcsS0FBTSxDQUFBLENBQUEsQ0FBakIsR0FBc0IsS0FBTSxDQUFBLENBQUEsQ0FB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QSxFQXFOQSxLQUFBLEdBQVEsU0FBQyxJQUFELEdBQUE7QUFDTixJQUFBLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBWixDQUFBLENBQUE7V0FDQSxNQUFNLENBQUMscUJBQVAsQ0FBNkIsS0FBN0IsRUFGTTtFQUFBLENBck5SLENBQUE7O0FBQUEsRUF5TkEsUUFBUSxDQUFDLGdCQUFULENBQTBCLGtCQUExQixFQUE4QyxTQUFBLEdBQUE7V0FBRyxLQUFBLENBQUEsRUFBSDtFQUFBLENBQTlDLENBek5BLENBQUE7QUFBQSIsImZpbGUiOiJqdW1wZXIvanVtcGVyLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsicmFuZG9tID0gKG1pbiwgbWF4KSAtPlxuICB1bmxlc3MgbWF4P1xuICAgIG1heCA9IG1pblxuICAgIG1pbiA9IDBcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pblxuXG5yZWN0YW5nbGUgPSAocmVjdDEuLi4pIC0+XG4gIG92ZXJsYXBzOiAocmVjdDIuLi4pIC0+XG4gICAgeE92ZXJsYXAgPSB5T3ZlcmxhcCA9IHRydWVcbiAgICBpZiByZWN0MVswXSA+IHJlY3QyWzBdICsgcmVjdDJbMl0gb3IgcmVjdDFbMF0gKyByZWN0MVsyXSA8IHJlY3QyWzBdXG4gICAgICB4T3ZlcmxhcCA9IGZhbHNlXG4gICAgaWYgcmVjdDFbMV0gPiByZWN0MlsxXSArIHJlY3QyWzNdIG9yIHJlY3QxWzFdICsgcmVjdDFbM10gPCByZWN0MlsxXVxuICAgICAgeU92ZXJsYXAgPSBmYWxzZVxuICAgIHJldHVybiB4T3ZlcmxhcCBhbmQgeU92ZXJsYXBcblxucG9ja2V0ID0gbmV3IFBvY2tldFxuXG4jIGNvbnRleHQtMmQgY29tcG9uZW50IGZvciBzdG9yaW5nIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCBhbmQgb3RoZXIgY2FudmFzIGluZm9cbnBvY2tldC5jb21wb25lbnQgJ2NvbnRleHQtMmQnLCAoY21wLCB7Y2FudmFzfSkgLT5cbiAgY21wLmNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgY2FudmFzIG9yICcjY2FudmFzJ1xuICBjbXAuZzJkID0gY21wLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gIGNtcC5jZW50ZXIgPSB7eDogMCwgeTogMH1cblxuICAjIGVuc3VyZSBjYW52YXMgaXMgYXMgbGFyZ2UgYXMgcG9zc2libGVcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJ3Jlc2l6ZScsIHJlc2l6ZSA9IC0+XG4gICAgY21wLmNhbnZhcy53aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGhcbiAgICBjbXAuY2FudmFzLmhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0XG4gICAgY21wLndpZHRoID0gY21wLmNhbnZhcy53aWR0aFxuICAgIGNtcC5oZWlnaHQgPSBjbXAuY2FudmFzLmhlaWdodFxuICByZXNpemUoKVxuXG4jIHRoZSBjb250ZXh0LTJkIGRhdGEgb2JqZWN0XG5wb2NrZXQua2V5IHsnY29udGV4dC0yZCc6IG51bGx9XG5cbiMgbWFpbnRhaW4ga2V5Ym9hcmQgc3RhdGUuIHRoaXMgZ3V5IG11dGF0ZXMgaGltc2VsZiwgaXQncyBwcmV0eSBiYWRhc3NcbnBvY2tldC5jb21wb25lbnQgJ2tleWJvYXJkLXN0YXRlJywgKGNtcCwge3RhcmdldCwga2V5bWFwfSkgLT5cbiAgY21wLnRhcmdldCA9IHRhcmdldCBvciBkb2N1bWVudFxuICBjbXAuZG93biA9IHt9XG4gICMgcmV0dXJucyB0cnVlIGlmIHRoZSBuYW1lZCBrZXkgd2FzIHByZXNzZWQgaW4gdGhlIGxhc3QgWCBtaWxsaXNlY29uZHNcbiAgY21wLmlzTmV3UHJlc3MgPSAoa2V5TmFtZSwgcmVjZW5jeSA9IDEwKSAtPlxuICAgIGRvd25UaW1lID0gY21wLmRvd25ba2V5TmFtZV1cbiAgICBkZWx0YSA9IERhdGUubm93KCkgLSBkb3duVGltZVxuICAgIGlmIGRvd25UaW1lID4gMCBhbmQgZGVsdGEgPiByZWNlbmN5XG4gICAgICBjbXAuZG93bltrZXlOYW1lXSA9IC0xXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuXG4gIGNtcC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lciAna2V5ZG93bicsIChlKSAtPlxuICAgIGtleU5hbWUgPSBrZXltYXBbZS53aGljaF1cbiAgICBjbXAuZG93bltlLndoaWNoXSA9IHRydWVcbiAgICBpZiBrZXlOYW1lIGFuZCBjbXAuZG93bltrZXlOYW1lXSBpcyAwXG4gICAgICAjIHJlY29yZCB0aW1lIGl0IHdhcyBwcmVzc2VkXG4gICAgICBjbXAuZG93bltrZXlOYW1lXSA9IERhdGUubm93KClcblxuICBjbXAudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIgJ2tleXVwJywgKGUpIC0+XG4gICAga2V5TmFtZSA9IGtleW1hcFtlLndoaWNoXVxuICAgIGNtcC5kb3duW2Uud2hpY2hdID0gZmFsc2VcbiAgICBpZiBrZXlOYW1lXG4gICAgICBjbXAuZG93bltrZXlOYW1lXSA9IDBcblxuIyB0aGUga2V5Ym9hcmQtc3RhdGUgZGF0YSBvYmplY3RcbnBvY2tldC5rZXlcbiAgJ2lucHV0JzogbnVsbFxuICAna2V5Ym9hcmQtc3RhdGUnOlxuICAgIGtleW1hcDpcbiAgICAgIDM3OiAnTEVGVCdcbiAgICAgIDM5OiAnUklHSFQnXG5cblxuIyBjb25zdGFudHNcbmN0eCA9IHBvY2tldC5nZXREYXRhICdjb250ZXh0LTJkJ1xuY3R4LmNlbnRlciA9IHt4OiBjdHgud2lkdGggLyAyLCB5OiBjdHguaGVpZ2h0IC8gMn1cblxuR1JBVklUWSA9IDAuNFxuQkFSUklFUl9ESVNUQU5DRSA9IGN0eC5oZWlnaHQgKiAzIC8gNFxuQkFSUklFUl9XSURUSCA9IDIwMFxuXG4jIGdhbWUgY29tcG9uZW50c1xucG9ja2V0LmNvbXBvbmVudCAncG9zaXRpb24nLCB7eDogMCwgeTogMH1cbnBvY2tldC5jb21wb25lbnQgJ3ZlbG9jaXR5Jywge3g6IDAsIHk6IDB9XG5wb2NrZXQuY29tcG9uZW50ICdzcXVhcmUnLCAgIHtzaXplOiAzMCwgY29sb3I6ICdjb3JuZmxvd2VyYmx1ZScsIGFuZ2xlOiAwfVxucG9ja2V0LmNvbXBvbmVudCAnYmFycmllcicsICB7aGVpZ2h0OiA1MCwgZ2FwV2lkdGg6IEJBUlJJRVJfV0lEVEgsIHg6IDAsIHk6IDAsIGNvbG9yOiAnY29ybmZsb3dlcmJsdWUnfVxuXG5wb2NrZXQucGxheWVyID0gcG9ja2V0LmtleVxuICBhbWF6aW5nOiB0cnVlXG4gIHNxdWFyZToge2NvbG9yOiAnYmxhY2snLCBhbmdsZTogTWF0aC5QSSAvIDQsIHNpemU6IDIwfVxuICBwb3NpdGlvbjoge3g6IGN0eC5jZW50ZXIueCwgeTogY3R4LmNlbnRlci55ICsgY3R4LmhlaWdodCAvIDR9XG4gIHZlbG9jaXR5OiBudWxsXG5cbmxldmVsID0gLTFcbmxhc3RCYXJyaWVyWCA9IGN0eC5jZW50ZXIueFxuYWRkTGV2ZWwgPSAtPlxuICBiYXJyaWVyID0ge3g6IGN0eC5jZW50ZXIueCArIHJhbmRvbSgtMTUwLCAxNTApLCB5OiAxMDAgLSBCQVJSSUVSX0RJU1RBTkNFICogbGV2ZWwrK31cbiAgc3F1YXJlWCA9IChiYXJyaWVyLnggKyBsYXN0QmFycmllclgpIC8gMiArIEJBUlJJRVJfV0lEVEggLyAyXG4gIHBvY2tldC5rZXkge2V2aWw6IHRydWUsIGJhcnJpZXJ9XG4gIHBvY2tldC5rZXlcbiAgICBldmlsOiB0cnVlXG4gICAgc3F1YXJlOiBudWxsXG4gICAgcG9zaXRpb246XG4gICAgICB4OiBzcXVhcmVYICsgcmFuZG9tKC1CQVJSSUVSX1dJRFRIIC8gMiwgQkFSUklFUl9XSURUSCAvIDIpXG4gICAgICB5OiBiYXJyaWVyLnkgLSBCQVJSSUVSX0RJU1RBTkNFICogMiAvIDNcbiAgcG9ja2V0LmtleVxuICAgIGV2aWw6IHRydWVcbiAgICBzcXVhcmU6IG51bGxcbiAgICBwb3NpdGlvbjpcbiAgICAgIHg6IHNxdWFyZVggKyByYW5kb20oLUJBUlJJRVJfV0lEVEggLyAyLCBCQVJSSUVSX1dJRFRIIC8gMilcbiAgICAgIHk6IGJhcnJpZXIueSAtIEJBUlJJRVJfRElTVEFOQ0UgLyAzXG4gIGxhc3RCYXJyaWVyWCA9IGJhcnJpZXIueFxuYWRkTGV2ZWwoKSBmb3IgaSBpbiBbMS4uM11cblxuc2NvcmUgPSAwXG5iZXN0U2NvcmUgPSAwXG5zY29yZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciAnLnNjb3JlcyAuY3VycmVudCdcbmhpZ2hzY29yZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciAnLnNjb3JlcyAuYmVzdCdcbnNjb3JlT25lID0gLT5cbiAgc2NvcmVFbC50ZXh0Q29udGVudCA9ICsrc2NvcmVcbnNjb3JlWmVybyA9IC0+XG4gIGlmIHNjb3JlID4gYmVzdFNjb3JlXG4gICAgaGlnaHNjb3JlRWwudGV4dENvbnRlbnQgPSBiZXN0U2NvcmUgPSBzY29yZVxuICBzY29yZUVsLnRleHRDb250ZW50ID0gc2NvcmUgPSAwXG5cbnBvY2tldC5zeXN0ZW0gJ2xldmVsLWJhcnJpZXInLCBbJ2JhcnJpZXInLCAnZXZpbCddLCAocG9ja2V0LCBrZXlzLCBiYXJyaWVycykgLT5cbiAgcFBvcyA9IHBvY2tldC5kYXRhRm9yIHBvY2tldC5wbGF5ZXIsICdwb3NpdGlvbidcbiAgcFNxICA9IHBvY2tldC5kYXRhRm9yIHBvY2tldC5wbGF5ZXIsICdzcXVhcmUnXG4gIHBsYXllclJlY3QgPSByZWN0YW5nbGUocFBvcy54LCBwUG9zLnkgKyBjdHgud2lkdGggLyAzLCBwU3Euc2l6ZSwgcFNxLnNpemUpXG4gIGZvciBrZXkgaW4ga2V5c1xuICAgIGJhcnJpZXIgPSBiYXJyaWVyc1trZXldXG4gICAgY29udGludWUgaWYgYmFycmllci5tYXJrZWQ/XG4gICAgaWYgcGxheWVyUmVjdC5vdmVybGFwcygwLCBiYXJyaWVyLnksIGN0eC53aWR0aCwgYmFycmllci5oZWlnaHQpXG4gICAgICBiYXJyaWVyLmNvbG9yID0gJ3JlZCdcbiAgICAgIGJhcnJpZXIubWFya2VkID0gZmFsc2VcbiAgICBpZiBwbGF5ZXJSZWN0Lm92ZXJsYXBzKGJhcnJpZXIueCwgYmFycmllci55LCBiYXJyaWVyLmdhcFdpZHRoLCBiYXJyaWVyLmhlaWdodClcbiAgICAgIGJhcnJpZXIuY29sb3IgPSAnZ3JlZW4nXG4gICAgICBiYXJyaWVyLm1hcmtlZCA9IHRydWVcbiAgICAgIHNjb3JlT25lKClcbiAgICBpZiBiYXJyaWVyLm1hcmtlZCBpcyBmYWxzZSB0aGVuIHNjb3JlWmVybygpXG5cbnBvY2tldC5zeXN0ZW0gJ3NxdWFyZS1zbWFzaCcsIFsncG9zaXRpb24nLCAnc3F1YXJlJywgJ2V2aWwnXSwgKHBvY2tldCwga2V5cywgcG9zaXRpb25zLCBzcXVhcmVzKSAtPlxuICBwUG9zID0gcG9ja2V0LmRhdGFGb3IgcG9ja2V0LnBsYXllciwgJ3Bvc2l0aW9uJ1xuICBwU3EgID0gcG9ja2V0LmRhdGFGb3IgcG9ja2V0LnBsYXllciwgJ3NxdWFyZSdcbiAgcGxheWVyUmVjdCA9IHJlY3RhbmdsZShwUG9zLngsIHBQb3MueSArIGN0eC53aWR0aCAvIDMsIHBTcS5zaXplLCBwU3Euc2l6ZSlcbiAgZm9yIGtleSBpbiBrZXlzXG4gICAgcG9zaXRpb24gPSBwb3NpdGlvbnNba2V5XVxuICAgIHNxdWFyZSAgID0gc3F1YXJlc1trZXldXG4gICAgY29udGludWUgaWYgc3F1YXJlLm1hcmtlZFxuICAgIGlmIHBsYXllclJlY3Qub3ZlcmxhcHMgcG9zaXRpb24ueCwgcG9zaXRpb24ueSwgc3F1YXJlLnNpemUsIHNxdWFyZS5zaXplXG4gICAgICBzcXVhcmUuY29sb3IgPSAncmVkJ1xuICAgICAgc3F1YXJlLm1hcmtlZCA9IHRydWVcbiAgICAgIHNjb3JlWmVybygpXG5cbiMga2V5Ym9hcmQgY29tbWFuZHNcbk1PVkUgPSB7eDogMiwgeTogMTJ9XG5wb2NrZXQuc3lzdGVtRm9yRWFjaCAnaW5wdXQtYnJpY2snLCBbJ3ZlbG9jaXR5JywgJ2FtYXppbmcnXSwgKHBvY2tldCwga2V5LCB2ZWxvY2l0eSkgLT5cbiAga2V5Ym9hcmQgPSBwb2NrZXQuZ2V0RGF0YSAna2V5Ym9hcmQtc3RhdGUnXG4gIGp1bXAgPSAwXG4gIGlmIGtleWJvYXJkLmlzTmV3UHJlc3MgJ0xFRlQnXG4gICAganVtcCA9IC1NT1ZFLnhcbiAgaWYga2V5Ym9hcmQuaXNOZXdQcmVzcyAnUklHSFQnXG4gICAganVtcCA9IE1PVkUueFxuICBpZiBqdW1wXG4gICAgdmVsb2NpdHkueCA9IGp1bXBcbiAgICB2ZWxvY2l0eS55ID0gTU9WRS55XG5cbiMgYXBwbHkgZ3Jhdml0eVxucG9ja2V0LnN5c3RlbUZvckVhY2ggJ2dyYXZpdHknLCBbJ3ZlbG9jaXR5J10sIChwb2NrZXQsIGtleSwgdmVsKSAtPlxuICB2ZWwueSAtPSBHUkFWSVRZXG5cbiMgbW92ZSBlYWNoIGJhbGxcbnBvY2tldC5zeXN0ZW1Gb3JFYWNoICdtb3ZlJywgWydwb3NpdGlvbicsICd2ZWxvY2l0eSddLCAocG9ja2V0LCBrZXksIHBvcywgdmVsKSAtPlxuICBwb3MueCArPSB2ZWwueFxuICBwb3MueSAtPSB2ZWwueVxuICBjdHguY2VudGVyLnkgPSBNYXRoLm1pbihjdHguY2VudGVyLnksIHBvcy55KVxuXG4jIG1vdmUgYmFycmllcnMgYW5kIGV2aWwgc3F1YXJlcyBhaGVhZCBvbmNlIHlvdSBwYXNzIHRoZW0gc28gdGhleSdsbCBnZXQgcmV1c2VkXG5wb2NrZXQuc3lzdGVtRm9yRWFjaCAnZGVzdHJveS1iYXJyaWVyJywgWydiYXJyaWVyJywgJ2V2aWwnXSwgKHBvY2tldCwga2V5LCBiYXJyaWVyKSAtPlxuICBpZiBiYXJyaWVyLnkgLSBCQVJSSUVSX0RJU1RBTkNFICogMiA+IGN0eC5jZW50ZXIueVxuICAgIHBvY2tldC5kZXN0cm95S2V5IGtleVxuICAgIGFkZExldmVsKClcbnBvY2tldC5zeXN0ZW1Gb3JFYWNoICdkZXN0cm95LXNxdWFyZScsIFsncG9zaXRpb24nLCAnZXZpbCddLCAocG9ja2V0LCBrZXksIHBvcykgLT5cbiAgaWYgcG9zLnkgLSBCQVJSSUVSX0RJU1RBTkNFICogMiA+IGN0eC5jZW50ZXIueVxuICAgIHBvY2tldC5kZXN0cm95S2V5IGtleVxuXG4jIGNsZWFyIHRoZSBjYW52YXMgZWFjaCBmcmFtZVxucG9ja2V0LnN5c3RlbSAnY2xlYXItY2FudmFzJywgW10sIChwb2NrZXQpIC0+XG4gIGN0eC5nMmQuY2xlYXJSZWN0IDAsIDAsIGN0eC53aWR0aCwgY3R4LmhlaWdodFxuXG4jIGRyYXcgZWFjaCBzcXVhcmVcbnBvY2tldC5zeXN0ZW1Gb3JFYWNoICdkcmF3LXNxdWFyZScsIFsncG9zaXRpb24nLCAnc3F1YXJlJ10sIChwb2NrZXQsIGtleSwgcG9zLCBzcXVhcmUpIC0+XG4gIGlzQW1hemluZyA9IHBvY2tldC5kYXRhRm9yKGtleSwgJ2FtYXppbmcnKVxuICB7ZzJkLCBjZW50ZXIsIHdpZHRofSA9IGN0eFxuICBnMmQuc2F2ZSgpXG4gIGcyZC5iZWdpblBhdGgoKVxuICBnMmQudHJhbnNsYXRlIHBvcy54LCBwb3MueSAtIGNlbnRlci55ICsgaWYgaXNBbWF6aW5nIHRoZW4gd2lkdGggLyAzIGVsc2UgMFxuICBnMmQucm90YXRlKHNxdWFyZS5hbmdsZSlcbiAgZzJkLmZpbGxTdHlsZSA9IHNxdWFyZS5jb2xvclxuICBnMmQucmVjdCAwLCAwLCBzcXVhcmUuc2l6ZSwgc3F1YXJlLnNpemVcbiAgZzJkLmNsb3NlUGF0aCgpXG4gIGcyZC5maWxsKClcbiAgZzJkLnJlc3RvcmUoKVxuXG5wb2NrZXQuc3lzdGVtRm9yRWFjaCAnZHJhdy1iYXJyaWVyJywgWydiYXJyaWVyJ10sIChwb2NrZXQsIGtleSwgYmFycmllcikgLT5cbiAge2cyZCwgd2lkdGgsIGNlbnRlcn0gPSBjdHhcbiAgZzJkLnNhdmUoKVxuICBnMmQuYmVnaW5QYXRoKClcbiAgZzJkLnRyYW5zbGF0ZSAwLCBiYXJyaWVyLnkgLSBjZW50ZXIueVxuICBnMmQuZmlsbFN0eWxlID0gYmFycmllci5jb2xvclxuICBnMmQucmVjdCAwLCAwLCBiYXJyaWVyLngsIGJhcnJpZXIuaGVpZ2h0XG4gIGcyZC5yZWN0IGJhcnJpZXIueCArIGJhcnJpZXIuZ2FwV2lkdGgsIDAsIHdpZHRoIC0gYmFycmllci5nYXBXaWR0aCwgYmFycmllci5oZWlnaHRcbiAgZzJkLmZpbGwoKVxuICBnMmQuY2xvc2VQYXRoKClcbiAgZzJkLnJlc3RvcmUoKVxuXG4jIHJlbmRlciBsb29wXG5zdGFydCA9ICh0aW1lKSAtPlxuICBwb2NrZXQudGljayh0aW1lKVxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHN0YXJ0XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ0RPTUNvbnRlbnRMb2FkZWQnLCAtPiBzdGFydCgpXG4iXX0=